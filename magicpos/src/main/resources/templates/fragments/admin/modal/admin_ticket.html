<!-- ê´€ë¦¬ì ìš”ê¸ˆì œ êµ¬ë§¤ ëª¨ë‹¬ -->
<div th:fragment="adminTicketModal" id="admin-ticket-modal" class="admin-modal">
  <div class="admin-modal-content">

    <!-- ëª¨ë‹¬ í—¤ë” -->
    <div class="admin-modal-header">
      <h2>ìš”ê¸ˆì œ êµ¬ë§¤</h2>
      <button class="admin-close-btn" onclick="closeAdminTicketModal()">Ã—</button>
    </div>

    <!-- ëª¨ë‹¬ ë°”ë”” -->
    <div class="admin-modal-body">

      <!-- ì¢Œì¸¡: í…Œì´ë¸” -->
      <div class="admin-ticket-left">
        <div class="admin-search-bar">
          <input type="text" id="admin-user-search-input" placeholder="íšŒì›ì´ë¦„ê²€ìƒ‰">
          <button class="admin-search-btn">ğŸ”</button>

          <!-- ì‹¤ì‹œê°„ ìœ ì € ê²€ìƒ‰ ê²°ê³¼ -->
          <ul id="admin-user-search-result" class="admin-user-search-result"></ul>

          <!-- ì„ íƒëœ ìœ ì € ë²ˆí˜¸ ì €ì¥ìš© -->
           <input type="hidden" id="selected-user-no" name="userNo">

        </div>

        <table class="admin-ticket-table">
          <thead>
            <tr>
              <th>ìš”ê¸ˆì œ</th>
              <th>ì œê³µ ì‹œê°„</th>
              <th>ê°€ê²©</th>
              <th></th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>íšŒì› 1000ì›ê¶Œ</td>
              <td>00:40</td>
              <td>1,000ì›</td>
              <td><button class="admin-add-btn">ï¼‹</button></td>
            </tr>
          </tbody>
        </table>
      </div>

      <!-- ìš°ì¸¡: ì„ íƒ + ê²°ì œ -->
      <div class="admin-ticket-right">
        <div class="admin-selected-ticket-box">
          <div class="admin-ticket-name">íšŒì› 1000ì›ê¶Œ</div>
          <div class="admin-ticket-info">1,000ì› (00:40)</div>
        </div>

        <div class="admin-pay-methods">
          <button class="admin-pay-btn" data-payment="í˜„ê¸ˆ">í˜„ê¸ˆ</button>
          <button class="admin-pay-btn" data-payment="ì‹ ìš©ì¹´ë“œ">ì‹ ìš©ì¹´ë“œ</button>
        </div>

        <!-- ì„ íƒëœ ê²°ì œ ë°©ë²• ì €ì¥ìš© -->
        <input type="hidden" id="selected-payment-method" name="paymentMethod" value="">
        
        <!-- CSRF í† í° ì¶”ê°€ -->
        <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />
        
        <button class="admin-confirm-btn" onclick="processAdminTicketPayment()">ê²°ì œí•˜ê¸°</button>
        
        <!-- í† ìŠ¤í˜ì´ë¨¼ì¸  ìŠ¤í¬ë¦½íŠ¸ ì¶”ê°€ -->
        <script src="https://js.tosspayments.com/v1/payment"></script>
        <script th:inline="javascript">
          const clientKey = "test_ck_ZLKGPx4M3MGPnBZkRAlwrBaWypv1"; // í…ŒìŠ¤íŠ¸ìš© client key
          const tossPayments = TossPayments(clientKey);
        </script>
      </div>

    </div>
  </div>
</div>
